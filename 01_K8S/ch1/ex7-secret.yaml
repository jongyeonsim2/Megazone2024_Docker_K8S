# secret 객체 만드는 방법

# 1. 명령형( cli )
# kubectl create secret generic db-info --from-literal=DB_PW=mypassword
# --from-literal : 문자열 형태로 secret 에서 key, value 형태로 저장하겠다는 의미.
# DB_PW : 환경변수의 key
# mypassword : DB_PW 환경변수의 value

# kubectl get secret

# kubectl describe secret db-info
# DB_PW key 의 value 를 볼 수 없음.

# 2. 선언형( yaml )
# secret 객체는 yaml 파일로 사용하지 않는 경우도 꽤 있음.
# yaml 로 관리를 하면, git 같은 곳에 관리될 수 있어,
# password 와 같은 보안을 유지해야 할 데이터가 유출될 수 있음.

# kubectl explain secret.data
# kubectl explain secret.stringData

apiVersion: v1
kind: Secret
metadata:
  name: my-secret
type: Opaque
data:
  # data 필드의 모든 키(key)에 해당하는 값(value)은 base64 로 인코딩된 문자열이어야 함.
  DB_PW: bXlwYXNzd29yZA== # 평문 mypassword 를 base64 인코딩함.
stringData:
  API_KEY1: ABCD-1234-5678-ZYX
  API_KEY2: bXlwYXNzd29yZA==
